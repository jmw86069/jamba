<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jamba Overview • jamba</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">jamba</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/jamba-vignette.html">Jamba Overview</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/jmw86069/jamba">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Jamba Overview</h1>
                        <h4 class="author">James M. Ward</h4>
            
            <h4 class="date">2017-11-08</h4>
          </div>

    
    
<div class="contents">
<div id="jamba-overview" class="section level1">
<h1 class="hasAnchor">
<a href="#jamba-overview" class="anchor"></a>Jamba Overview</h1>
<p>Jamba is intended to contain JAM base functions, to be re-used during analysis, and by other R packages. Functions are broadly divided into categories.</p>
<div id="plot-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-functions" class="anchor"></a>Plot functions</h2>
<div id="plotsmoothscatter" class="section level3">
<h3 class="hasAnchor">
<a href="#plotsmoothscatter" class="anchor"></a>plotSmoothScatter</h3>
<p>A common problem when visualizing extremely large datasets is how to display thousands of datapoints while indicating the amount of overlap of those points. The R <code><a href="http://www.rdocumentation.org/packages/graphics/topics/smoothScatter">graphics::smoothScatter()</a></code> function provides an adequate drop-in replacement for most uses of <code>plot()</code>, but several aspects are not easily customized and are targeted by the <code><a href="http://www.rdocumentation.org/packages/jamba/topics/plotSmoothScatter">jamba::plotSmoothScatter()</a></code> function.</p>
<p>First, the <code>useRaster=TRUE</code> feature from <code><a href="http://www.rdocumentation.org/packages/graphics/topics/image">graphics::image()</a></code> is intended to enable rasterized images instead of rendering multiple polygons. The rasterized image saves substantial image space, is more efficiently saved as vectorized output in PDF and SVG, and is more efficiently displayed on a remote plot device. However it is not consistently honored, and has some problem when the plot aspect ratio is not 1:1. The <code>plotSmoothScatter</code> function consistently enforces <code>useRaster=TRUE</code> by calling a custom <code><a href="http://www.rdocumentation.org/packages/jamba/topics/imageDefault">jamba::imageDefault()</a></code> function, which has methods to handle non-square visualization.</p>
<p>A quick way to see some enhancements of plotSmoothScatter is by running doTest=TRUE:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plotSmoothScatter.html">plotSmoothScatter</a></span>(<span class="dt">doTest=</span><span class="ot">TRUE</span>);</code></pre>
<p><img src="jambaVignette-plotSmoothScatter-1.png" width="768"></p>
<p>The data represents a highly correlated x- and y-axis, with a secondary “band” of correlation added slightly offset. Each row contains an increasing amount of background noise.</p>
<p>The left column shows graphics::smoothScatter, using the same color ramp used by plotSmoothScatter. The secondary “band” is somewhat obscured by the default density function. The second and third columns show the effect of using custom bandwidth in plotSmoothScatter.</p>
<p>Also, while smoothScatter displays 50 points on the extremes by default, in order to show the range of data which may otherwise not be visible, the bandwidth function in plotSmoothScatter typically displays the full extent of the data without these additional points.</p>
</div>
<div id="imagebycolors" class="section level3">
<h3 class="hasAnchor">
<a href="#imagebycolors" class="anchor"></a>imageByColors</h3>
<p>The <code><a href="../reference/imageByColors.html">imageByColors()</a></code> function is intended to take a matrix or data.frame and create the equivalent of <code>image()</code>. It also displays cell labels when supplied in an equivalent matrix or data.frame, by default combining adjacent labels so only one label is displayed in the middle of a contiguous range of cells.</p>
<p>This function is particularly useful when displaying something like experiment design, where each factor level in the experiment has been assigned a color.</p>
<p>Here, we define a simple data.frame composed of colors, then use the data.frame to label itself:</p>
<pre class="sourceCode r"><code class="sourceCode r">a1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"red"</span>,<span class="st">"blue"</span>)[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>)];
b1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"yellow"</span>,<span class="st">"orange"</span>)[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)];
c1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"purple"</span>,<span class="st">"orange"</span>)[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)];
d1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"purple"</span>,<span class="st">"green"</span>)[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)];
df1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a=</span>a1, <span class="dt">b=</span>b1, <span class="dt">c=</span>c1, <span class="dt">d=</span>d1);
<span class="kw"><a href="../reference/imageByColors.html">imageByColors</a></span>(df1, <span class="dt">cellnote=</span>df1);</code></pre>
<p><img src="jambaVignette-imageByColors1-1.png" width="768"></p>
<p>The <code><a href="../reference/imageByColors.html">imageByColors()</a></code> function calls <code><a href="../reference/imageDefault.html">imageDefault()</a></code> which obeys the <code>useRaster=TRUE</code> directive. It attempts to correct for blurriness in the output, with the benefit of efficiency in rendering.</p>
<p>Lastly, the labels can be rotated and resized, to allow flexibility in positioning labels as needed in the final plot. Below we render a rasterized image, showing text rotated and adjusted in various ways.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/imageByColors.html">imageByColors</a></span>(df1, <span class="dt">cellnote=</span>df1, <span class="dt">useRaster=</span><span class="ot">TRUE</span>, <span class="dt">adjBy=</span><span class="st">"column"</span>,
   <span class="dt">cexCellnote=</span><span class="kw">list</span>(<span class="kw">c</span>(<span class="fl">1.5</span>,<span class="fl">1.5</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="fl">1.5</span>), <span class="kw">c</span>(<span class="fl">1.6</span>,<span class="fl">1.2</span>), <span class="kw">c</span>(<span class="fl">1.6</span>,<span class="fl">1.5</span>)),
   <span class="dt">srtCellnote=</span><span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">90</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">45</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">90</span>,<span class="dv">0</span>)));</code></pre>
<p><img src="jambaVignette-imageByColors2-1.png" width="768"></p>
</div>
</div>
<div id="helper-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#helper-functions" class="anchor"></a>Helper functions</h2>
<div id="mixedsort-and-mixedorder" class="section level3">
<h3 class="hasAnchor">
<a href="#mixedsort-and-mixedorder" class="anchor"></a>mixedSort and mixedOrder</h3>
<p>The <code>gtools</code> package implemented a function mixedsort() which aimed to mixedSort vectors similar GNU version sort, where numeric values within an alphanumeric string would be sorted in proper numerical order.</p>
<p>The mixedSort() function is an optimization and extension, driven by the desire to sort tens of thousands of gene symbols (and micro-RNAs, miRNA) efficiently and based upon known order. Also, because miRNA nomenclature includes a dash ‘-’ character, numbers are no longer allowed to be negative during this sorting algorithm, unless overridden. For example “miR-2” should sort before “miR-11”, and after “miR-1”.</p>
<table class="table">
<thead><tr class="header">
<th align="left">sort</th>
<th align="left">gtools_mixedsort</th>
<th align="left">mixedSort</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">miR-1</td>
<td align="left">miR-122</td>
<td align="left">miR-1</td>
</tr>
<tr class="even">
<td align="left">miR-12</td>
<td align="left">miR-12</td>
<td align="left">miR-1a</td>
</tr>
<tr class="odd">
<td align="left">miR-122</td>
<td align="left">miR-2</td>
<td align="left">miR-1b</td>
</tr>
<tr class="even">
<td align="left">miR-1a</td>
<td align="left">miR-1</td>
<td align="left">miR-2</td>
</tr>
<tr class="odd">
<td align="left">miR-1b</td>
<td align="left">miR-1a</td>
<td align="left">miR-12</td>
</tr>
<tr class="even">
<td align="left">miR-2</td>
<td align="left">miR-1b</td>
<td align="left">miR-122</td>
</tr>
</tbody>
</table>
<p>Note: it took roughly 12 seconds to sort 43,000 gene symbols using gtools::mixedsort, and roughly 0.5 seconds using mixedSort.</p>
<p>The mixedOrder() function is actually the core ordering algorithm, called by mixedSort(). The mixedOrder() function does not fully behave like order(), in that order() accepts a list of vectors as one type of input, and applies the order logic to each list iteratively, in order break ties. Instead the mmixedOrder() function was implemented to serve that purpose.</p>
</div>
<div id="mixedsortdf" class="section level3">
<h3 class="hasAnchor">
<a href="#mixedsortdf" class="anchor"></a>mixedSortDF</h3>
<p>The mixedSortDF() function is a convenient wrapper around mixedSort() applied to data.frames. It sorts columns in a specified order, maintaining ties in each column, and breaking ties as warranted in subsequent columns. It has the added benefit of maintaining factor order, so a data.frame that contains a column of factors with a specified order will maintain that order during the sort process. This behavior is especially useful when sorting a data.frame with experiment design, where each column may contain an ordered factor indicating the proper sample group ordering.</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"miR-12"</span>,<span class="st">"miR-1"</span>,<span class="st">"miR-122"</span>,<span class="st">"miR-1b"</span>, <span class="st">"miR-1a"</span>,<span class="st">"miR-2"</span>);
g &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">"Air"</span>, <span class="st">"Treatment"</span>, <span class="st">"Control"</span>), <span class="dv">2</span>);
gf &lt;-<span class="st"> </span><span class="kw">factor</span>(g, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">"Control"</span>,<span class="st">"Air"</span>, <span class="st">"Treatment"</span>));
df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">groupfactor=</span>gf, <span class="dt">miRNA=</span>x, <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>);
df2sorted &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mixedSortDF.html">mixedSortDF</a></span>(df2);</code></pre>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">groupfactor</th>
<th align="left">miRNA</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">6</td>
<td align="left">Control</td>
<td align="left">miR-2</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="left">Control</td>
<td align="left">miR-122</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="left">Air</td>
<td align="left">miR-1b</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">Air</td>
<td align="left">miR-12</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">Treatment</td>
<td align="left">miR-1</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="left">Treatment</td>
<td align="left">miR-1a</td>
</tr>
</tbody>
</table>
</div>
<div id="setprompt" class="section level3">
<h3 class="hasAnchor">
<a href="#setprompt" class="anchor"></a>setPrompt</h3>
<p>When working with multiple R sessions, sometimes on different computers, it can be helpful to add visual cues to help reinforce which R session is for which project. The <code><a href="../reference/setPrompt.html">setPrompt()</a></code> function is intended simply to update the R console prompt to include the project name. It also adds the R version, and optionally the process ID.</p>
<p>The process ID is particularly helpful if one R session becomes inactive, and if there are other active R sessions open. The process ID can be a helpful way to kill the specific R session without fear of accidentally killing the wrong one.</p>
<p><code><a href="../reference/setPrompt.html">setPrompt()</a></code> will also define the prompt using terminal colors, if the <code>crayon</code> package is installed, and if terminal colors are enabled.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/setPrompt.html">setPrompt</a></span>(<span class="st">"jambaVignette"</span>);
<span class="co"># {jamba}-R-3.3.2_10789&gt;</span></code></pre>
<div class="figure">
<img src="README-setPrompt.png" alt="setPrompt example"><p class="caption">setPrompt example</p>
</div>
<p>When using the <code>jamsession</code> R package to manage R sessions, the prompt is a helpful way to reinforce the name of the active R session, using the same name to save the session.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#jamba-overview">Jamba Overview</a><ul class="nav nav-pills nav-stacked">
<li><a href="#plot-functions">Plot functions</a></li>
      <li><a href="#helper-functions">Helper functions</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
