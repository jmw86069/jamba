<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate row group means, or other statistics — rowGroupMeans • jamba</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate row group means, or other statistics — rowGroupMeans"><meta property="og:description" content="Calculate row group means, or other statistics"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jamba</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.70.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/jamba-vignette.html">Jamba Overview</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/jmw86069/jamba/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate row group means, or other statistics</h1>
    <small class="dont-index">Source: <a href="http://github.com/jmw86069/jamba/blob/HEAD/R/jamba.r" class="external-link"><code>R/jamba.r</code></a></small>
    <div class="hidden name"><code>rowGroupMeans.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate row group means, or other statistics</p>
    </div>

    <div class="ref-usage sourceCode"><pre class="sourceCode r"><code><span class="fu">rowGroupMeans</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">groups</span>,
  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,
  useMedian <span class="op">=</span> <span class="cn">TRUE</span>,
  rmOutliers <span class="op">=</span> <span class="cn">FALSE</span>,
  madFactor <span class="op">=</span> <span class="fl">5</span>,
  returnType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"output"</span>, <span class="st">"input"</span><span class="op">)</span>,
  rowStatsFunc <span class="op">=</span> <span class="cn">NULL</span>,
  groupOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"same"</span>, <span class="st">"sort"</span><span class="op">)</span>,
  keepNULLlevels <span class="op">=</span> <span class="cn">FALSE</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>

    <div id="ref-sections">
    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>numeric data matrix</p></dd>
<dt>groups</dt>
<dd><p>vector of group labels, either as a character
vector, or a factor. See the parameter <code>groupOrder</code> for
ordering of group labels in the output data matrix.</p></dd>
<dt>useMedian</dt>
<dd><p>logical indicating whether the default
stat should be "mean" or "median".</p></dd>
<dt>rmOutliers</dt>
<dd><p>logical indicating whether to apply outlier
detection and removal.</p></dd>
<dt>madFactor</dt>
<dd><p>numeric value indicating the multiple of the
MAD value to define outliers. For example <code>madFactor=5</code>
will take the MAD value for a group multiplied by 5,
5<em>MAD, as a threshold for outliers. So any points more than
5</em>MAD distance from the median per group are outliers.</p></dd>
<dt>returnType</dt>
<dd><p>character value indicating the return data
type, <code>"output"</code> returns one summary stat value per group, per row;
<code>"input"</code> is useful when <code>rmOutliers=TRUE</code> in that it returns
a matrix with the same dimensions as the input, except with
outlier points replaced with NA.</p></dd>
<dt>rowStatsFunc</dt>
<dd><p>optional function which takes a numeric matrix
as input, and returns a numeric vector equal to the number of
rows of the input data matrix. Examples: <code><a href="https://rdrr.io/r/base/colSums.html" class="external-link">base::rowMeans()</a></code>,
<code><a href="https://rdrr.io/pkg/matrixStats/man/rowMedians.html" class="external-link">matrixStats::rowMedians()</a></code>, <code><a href="https://rdrr.io/pkg/matrixStats/man/rowSds.html" class="external-link">matrixStats::rowMads</a></code>.</p></dd>
<dt>groupOrder</dt>
<dd><p>character value indicating how character group
labels are ordered in the final data matrix, when <code>returnType="output"</code>.
Note that when <code>groups</code> is a factor, the factor levels are kept
in that order. Otherwise, <code>"same"</code> keeps groups in the same
order they appear in the input matrix; <code>"sort"</code> applies
<code><a href="mixedSort.html">jamba::mixedSort()</a></code> to the labels.</p></dd>
<dt>keepNULLlevels</dt>
<dd><p>logical indicating whether to keep factor
levels even when there are no corresponding columns in <code>x</code>.
When <code>TRUE</code> and <code>returnType="output"</code> the output matrix will
contain one colname for each factor level, with NA values used
to fill empty factor levels. This mechanism can be helpful to
ensure that output matrices have consistent colnames.</p></dd>
<dt>verbose</dt>
<dd><p>logical indicating whether to print verbose output.</p></dd>
<dt>...</dt>
<dd><p>additional parameters are passed to <code>rowStatsFunc</code>,
and if <code>rmOutliers=TRUE</code> to <code><a href="rowRmMadOutliers.html">jamba::rowRmMadOutliers()</a></code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>When <code>returnType="output"</code> the output is a numeric matrix
with the same number of columns as the number of unique
<code>groups</code> labels. When <code>groups</code> is a factor and
<code>keepNULLlevels=TRUE</code>, the number of columns will be the
number of factor levels, otherwise it will be the number of
factor levels used in <code>groups</code>.
When <code>returnType="input"</code> the output is a numeric matrix
with the same dimensions as the input data. This output is
intended for use with <code>rmOutliers=TRUE</code> which will replace
outlier points with <code>NA</code> values. Therefore, this matrix can
be used to see the location of outliers.
The function also returns attributes that describe the
number of samples per group overall:</p><dl><dt>attr(out, "n")</dt>
<dd><p>The attribute <code>"n"</code> is used to describe
the number of replicates per group.</p></dd>

<dt>attr(out, "nLabel")</dt>
<dd><p>The attribute <code>"nLabel"</code> is
a simple text label in the form <code>"n=3"</code>.</p></dd>


</dl><p>Note that when <code>rmOutliers=TRUE</code> the number of replicates per
group will vary depending upon the outliers removed. In that
case, remember that the reported <code>"n"</code> is always the total
possible columns available prior to outlier removal.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function by default calculates group mean values
per row in a numeric matrix. However, the stat function
can be changed to calculate row medians, row MADs, etc.</p>
<p>An added purpose of this function is optional outlier
filtering, via calculation of MAD values and applying
a MAD threshold cutoff. The intention is to identify
technical outliers that otherwise adversely affect the
calculated group mean or median values. To inspect the
data after outlier removal, use the parameter <code>returnType="input"</code>
which will return the input data matrix with <code>NA</code>
substituted for outlier points. Outlier detection and
removal is performed by <code><a href="rowRmMadOutliers.html">jamba::rowRmMadOutliers()</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other jam numeric functions: 
<code><a href="deg2rad.html">deg2rad</a>()</code>,
<code><a href="fix_matrix_ratio.html">fix_matrix_ratio</a>()</code>,
<code><a href="noiseFloor.html">noiseFloor</a>()</code>,
<code><a href="normScale.html">normScale</a>()</code>,
<code><a href="rad2deg.html">rad2deg</a>()</code>,
<code><a href="rowRmMadOutliers.html">rowRmMadOutliers</a>()</code>,
<code><a href="warpAroundZero.html">warpAroundZero</a>()</code></p></div>
    </div>
    </div>

    <div id="examples">
    <h2>Examples</h2>
    <div class="ref-examples sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>ncol<span class="op">=</span><span class="fl">9</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">90</span><span class="op">)</span><span class="op">)</span>;</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">]</span>;</span>
<span class="r-in"><span class="fu">rowGroupMeans</span><span class="op">(</span><span class="va">x</span>, groups<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, each<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  a           b           c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,] -0.005767173  0.83204713  0.24841265</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]  0.046726172 -0.27934628  0.06528818</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,] -0.224267885  0.35872890  0.01915639</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] -0.542888255 -0.01104548  0.25733838</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,] -0.433310317 -0.45278397  0.00837096</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] -0.289461574 -0.79533912 -0.21951563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] -0.057106774 -0.81496871  0.59625902</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]  0.503607972  0.24226348  0.11971764</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]  0.992160365 -1.42509839  0.14377148</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,] -0.690953840  0.36594112 -0.11775360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"n")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a b c </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 3 3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"nLabel")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a     b     c </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "n=3" "n=3" "n=3" </span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

