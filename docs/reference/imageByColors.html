<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Display color raster image using a matrix of colors — imageByColors • jamba</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Display color raster image using a matrix of colors — imageByColors" />
<meta property="og:description" content="Display color raster image using a matrix of colors" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jamba</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.49.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/jamba-vignette.html">Jamba Overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jmw86069/jamba">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Display color raster image using a matrix of colors</h1>
    <small class="dont-index">Source: <a href='https://github.com/jmw86069/jamba/blob/master/R/jamba-plots.r'><code>R/jamba-plots.r</code></a></small>
    <div class="hidden name"><code>imageByColors.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Display color raster image using a matrix of colors</p>
    </div>

    <pre class="usage"><span class='fu'>imageByColors</span>(
  <span class='no'>x</span>,
  <span class='kw'>useRaster</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>fixRasterRatio</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>maxRatioFix</span> <span class='kw'>=</span> <span class='fl'>100</span>,
  <span class='kw'>xaxt</span> <span class='kw'>=</span> <span class='st'>"s"</span>,
  <span class='kw'>yaxt</span> <span class='kw'>=</span> <span class='st'>"s"</span>,
  <span class='kw'>doPlot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>cellnote</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>cexCellnote</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>srtCellnote</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>fontCellnote</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>groupCellnotes</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>groupBy</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"column"</span>, <span class='st'>"row"</span>),
  <span class='kw'>groupByColors</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>adjBy</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"column"</span>, <span class='st'>"row"</span>),
  <span class='kw'>adjustMargins</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>xpd</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>bty</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='st'>"bty"</span>),
  <span class='kw'>flip</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"none"</span>, <span class='st'>"y"</span>, <span class='st'>"x"</span>, <span class='st'>"xy"</span>),
  <span class='kw'>keepTextAlpha</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>doTest</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>add</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>matrix or data.frame containing colors</p></td>
    </tr>
    <tr>
      <th>useRaster</th>
      <td><p>logical sent to <code><a href='imageDefault.html'>imageDefault</a></code> to enable
raster rendering, as opposed to polygon rendering. This parameter is
highly recommended when the matrix is large (&gt;50 columns or rows).</p></td>
    </tr>
    <tr>
      <th>fixRasterRatio</th>
      <td><p>logical sent to <code><a href='imageDefault.html'>imageDefault</a></code>.</p></td>
    </tr>
    <tr>
      <th>maxRatioFix</th>
      <td><p>numeric sent to <code><a href='imageDefault.html'>imageDefault</a></code>.</p></td>
    </tr>
    <tr>
      <th>xaxt, yaxt</th>
      <td><p>character values compatible with <code><a href='https://rdrr.io/r/graphics/par.html'>par</a></code> to
determine whether x- and y-axes are plotted. Set both to "n" to
suppress display of axes.</p></td>
    </tr>
    <tr>
      <th>doPlot</th>
      <td><p>logical whether to create a plot, or simply return data which
would have been used to create the plot.</p></td>
    </tr>
    <tr>
      <th>cellnote</th>
      <td><p>matrix or data.frame of labels to be displayed on the
image. If groupCellnotes==TRUE labels will be placed in the center
of consecutive cells with the same label and identical color.
Currently, cell text is colored using <code><a href='setTextContrastColor.html'>setTextContrastColor</a></code>
which uses either white or black depending upon the brightness of
the background color.</p></td>
    </tr>
    <tr>
      <th>cexCellnote, srtCellnote, fontCellnote</th>
      <td><p>numeric vectors, with values
applied to cellnote text to be compatible with par("cex"), par("srt"),
and par("font"), respectively. If supplied a matrix or data.frame with
it is used as-is or expanded to equivalent dimensions of <code>x</code>.
If the vector is named by colnames(x) then it is applied
by column in order, otherwise it is applied by row, with values recycled
to the number of columns or rows, respectively. Note <code>cexCellnote</code>
can also be a list, with the list elements being applied to individual
cells in order. If the list is named by colnames(x), each list element
is applied to values in each column, in order. In future this parameter
may also accept a matrix of cex values as input. Final note: values are
applied to each cell, but when cell labels are combined with
groupCellnotes==TRUE, the value for the first matching cell is used.
Remember that values are placed by coordinate, bottom-to-top on the
y-axis, and left-to-right on the x-axis.</p></td>
    </tr>
    <tr>
      <th>groupCellnotes</th>
      <td><p>logical whether to group labels where consecutive
cells contain the same label and identical cell colors, thus only
displaying one label in the center of these groups.</p></td>
    </tr>
    <tr>
      <th>groupBy</th>
      <td><p>character value indicating the direction to group
cellnotes, when <code>groupCellnotes=TRUE</code>: <code>"row"</code> will group cellnote
values by row; <code>"column"</code> will group cellnote values by column.
By default, it will first group cellnotes by <code>"row"</code> then
by <code>"column"</code>.</p></td>
    </tr>
    <tr>
      <th>groupByColors</th>
      <td><p>logical indicating whether the cellnote grouping
should also include the cell color. When <code>groupByColors=FALSE</code>,
cellnote values will be grouped together regardless whether the
underlying colors change, which may be preferred when applying
text label to topographical data.</p></td>
    </tr>
    <tr>
      <th>adjBy</th>
      <td><p>character value indicating how to apply adjustments for
cexCellnote, srtCellnote, and fontCellnote, as described above.</p></td>
    </tr>
    <tr>
      <th>adjustMargins</th>
      <td><p>logical indicating whether to adjust the axis
label margins to ensure enough room to draw the text rownames
and colnames.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical whether to print verbose output.</p></td>
    </tr>
    <tr>
      <th>xpd</th>
      <td><p>NULLL or logical used for <code><a href='https://rdrr.io/r/graphics/par.html'>par("xpd")</a></code> to define whether
to crop displayed output to the plot area. If xpd=NULL then par("xpd")
will not be modified, otherwise par("xpd"=xpd) will be defined while
adding any cell notes, then reverted to its previous value afterward.
This parameter is mainly useful when cellnote labels may overhang the
plot space, and would be cropped and not visible if
<code><a href='https://rdrr.io/r/graphics/par.html'>par("xpd"=TRUE)</a></code>.</p></td>
    </tr>
    <tr>
      <th>keepTextAlpha</th>
      <td><p>logical passed to <code><a href='setTextContrastColor.html'>setTextContrastColor</a></code>
indicating whether the text label color should inherit the alpha
transparency from the background color. If TRUE then fully transparent
background colors will not have a visible label.</p></td>
    </tr>
    <tr>
      <th>doTest</th>
      <td><p>logical whether to run a test showing basic features of
<code>imageByColors</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is similar to <code><a href='https://rdrr.io/r/graphics/image.html'>image</a></code> except that
it takes a matrix which already has colors defined for each cell.
This function calls <code><a href='imageDefault.html'>imageDefault</a></code> which enables updated
use of the <code>useRaster</code> functionality.</p>
<p>Additionally, if <code>cellnote</code> is supplied, which contains a matrix
of labels for the image cells, those labels will also be displayed.
By default, labels are grouped, so that only one label is displayed
whenever two or more labels appear in consecutive cells. This behavior
can be disabled with groupCellnotes=FALSE.</p>
<p>The <code>groupCellnotes</code> behavior uses <code><a href='breaksByVector.html'>breaksByVector()</a></code> to
determine where to place consecutive labels, and it applies this logic
starting with rows, then columns. Note that labels are only grouped when
both the cell color and the cell label are identical for consecutive
cells.</p>
<p>In general, if a large rectangular set of cells contains the same label,
and cell colors, the resulting label will be positioned in the
center. However, when the square is not symmetric, the label will be
grouped only where consecutive columns contain the same groups of
consecutive rows for a given label. In theory one could use polygon
functions from the <code>sp</code> or <code>rgeos</code> package to detect contiguous
polygons, and position the label in the center of those polygons.</p>
<p>It is helpful to rotate labels partially to prevent overlaps, e.g.
srtCellnote=10 or srtCellnote=80.</p>
<p>To do:</p><ul>
<li><p>Detect the size of the area being labeled and determine whether
to rotate the label sideways.</p></li>
<li><p>Detect the size of the label, compared to its bounding box,
and resize the label to fit the available space.</p></li>
<li><p>Optionally draw border around contiguous colored and labeled
polygons. Whether to draw border based only upon color, or color
and label, or just label... it may get confusing.</p></li>
<li><p>Label proper contiguous polygons based upon color and label,
especially when color and label are present on multiple rows and
columns, but not always the same columns per row.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other jam plot functions: 
<code><a href='adjustAxisLabelMargins.html'>adjustAxisLabelMargins</a>()</code>,
<code><a href='coordPresets.html'>coordPresets</a>()</code>,
<code><a href='decideMfrow.html'>decideMfrow</a>()</code>,
<code><a href='drawLabels.html'>drawLabels</a>()</code>,
<code><a href='getPlotAspect.html'>getPlotAspect</a>()</code>,
<code><a href='groupedAxis.html'>groupedAxis</a>()</code>,
<code><a href='imageDefault.html'>imageDefault</a>()</code>,
<code><a href='minorLogTicksAxis.html'>minorLogTicksAxis</a>()</code>,
<code><a href='nullPlot.html'>nullPlot</a>()</code>,
<code><a href='plotPolygonDensity.html'>plotPolygonDensity</a>()</code>,
<code><a href='plotSmoothScatter.html'>plotSmoothScatter</a>()</code>,
<code><a href='shadowText.html'>shadowText</a>()</code>,
<code><a href='showColors.html'>showColors</a>()</code>,
<code><a href='smoothScatterJam.html'>smoothScatterJam</a>()</code>,
<code><a href='sqrtAxis.html'>sqrtAxis</a>()</code>,
<code><a href='usrBox.html'>usrBox</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>a1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"red4"</span>,<span class='st'>"blue"</span>)[<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>2</span>)];
<span class='no'>b1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"yellow"</span>,<span class='st'>"orange"</span>)[<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>2</span>)];
<span class='no'>c1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"purple"</span>,<span class='st'>"orange"</span>)[<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>2</span>)];
<span class='no'>d1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"purple"</span>,<span class='st'>"green4"</span>)[<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>2</span>)];
<span class='no'>df1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>a</span><span class='kw'>=</span><span class='no'>a1</span>, <span class='kw'>b</span><span class='kw'>=</span><span class='no'>b1</span>, <span class='kw'>c</span><span class='kw'>=</span><span class='no'>c1</span>, <span class='kw'>d</span><span class='kw'>=</span><span class='no'>d1</span>);

<span class='co'># default using polygons</span>
<span class='fu'>imageByColors</span>(<span class='no'>df1</span>, <span class='kw'>cellnote</span><span class='kw'>=</span><span class='no'>df1</span>);</div><div class='img'><img src='imageByColors-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># useRaster=TRUE, edges are slightly blurred with small tables</span>
<span class='fu'>imageByColors</span>(<span class='no'>df1</span>, <span class='kw'>cellnote</span><span class='kw'>=</span><span class='no'>df1</span>, <span class='kw'>useRaster</span><span class='kw'>=</span><span class='fl'>TRUE</span>);</div><div class='img'><img src='imageByColors-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># some text features, rotation, font size, etc</span>
<span class='fu'>imageByColors</span>(<span class='no'>df1</span>, <span class='kw'>cellnote</span><span class='kw'>=</span><span class='no'>df1</span>, <span class='kw'>useRaster</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>adjBy</span><span class='kw'>=</span><span class='st'>"column"</span>,
   <span class='kw'>cexCellnote</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1.5</span>,<span class='fl'>1.5</span>,<span class='fl'>1</span>), <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>1.5</span>), <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1.6</span>,<span class='fl'>1.2</span>), <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1.6</span>,<span class='fl'>1.5</span>)),
   <span class='kw'>srtCellnote</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>90</span>,<span class='fl'>0</span>,<span class='fl'>0</span>), <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>,<span class='fl'>45</span>), <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>), <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>,<span class='fl'>90</span>,<span class='fl'>0</span>)));</div><div class='img'><img src='imageByColors-3.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


