<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Warp a vector of numeric values relative to zero — warpAroundZero • jamba</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Warp a vector of numeric values relative to zero — warpAroundZero"><meta property="og:description" content="Warp a vector of numeric values relative to zero"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jamba</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.95.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/jamba-vignette.html">Jamba Overview</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/jmw86069/jamba/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Warp a vector of numeric values relative to zero</h1>
    <small class="dont-index">Source: <a href="http://github.com/jmw86069/jamba/blob/HEAD/R/jamba.r" class="external-link"><code>R/jamba.r</code></a></small>
    <div class="hidden name"><code>warpAroundZero.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Warp a vector of numeric values relative to zero</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens <span class="op">=</span> <span class="fl">5</span>, baseline <span class="op">=</span> <span class="fl">0</span>, xCeiling <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p><code>numeric</code> vector</p></dd>


<dt>lens</dt>
<dd><p><code>numeric</code> value which defines the lens factor,
where <code>lens &gt; 0</code> will compress values near zero, and
<code>lens &lt; 0</code> will expand values near zero and compress
values near the maximum value. If <code>lens == 0</code> the
numeric values are not changed.</p></dd>


<dt>baseline</dt>
<dd><p><code>numeric</code> value describing the baseline, for example
when the central value is non-zero. The baseline is subtracted
from <code>x</code>, the warp is applied, then the baseline is added to
the result.</p></dd>


<dt>xCeiling</dt>
<dd><p><code>numeric</code> maximum value used for the color warp range,
useful for consistency. When <code>xCeiling</code> is not supplied, the
maximum difference from <code>baseline</code> is used. When <code>xCeiling</code> is
defined, and <code>baseline</code> is non-zero, the effective value used
is <code>(xCeiling - baseline)</code>.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function warps numeric values using a log curve
transformation, such that values are either more compressed
near zero, or more compressed near the maximum values.
For example, a vector of integers from -10 to 10 would be warped
so the intervals near zero were smaller than 1, and intervals
farthest from zero are greater than 1.</p>
<p>The main driver for this function was the desire to compress
divergent color scales used in heatmaps, in order to enhance
smaller magnitude numeric values. Existing color ramps map the
color gradient in a linear manner relative to the numeric range,
which can cause extreme values to dominate the color scale.
Further, a linear application of colors is not always appropriate.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other jam numeric functions: 
<code><a href="deg2rad.html">deg2rad</a>()</code>,
<code><a href="fix_matrix_ratio.html">fix_matrix_ratio</a>()</code>,
<code><a href="noiseFloor.html">noiseFloor</a>()</code>,
<code><a href="normScale.html">normScale</a>()</code>,
<code><a href="rad2deg.html">rad2deg</a>()</code>,
<code><a href="rowGroupMeans.html">rowGroupMeans</a>()</code>,
<code><a href="rowRmMadOutliers.html">rowRmMadOutliers</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">xPlus10</span> <span class="op">&lt;-</span> <span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens<span class="op">=</span><span class="fl">10</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">xMinus10</span> <span class="op">&lt;-</span> <span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens<span class="op">=</span><span class="op">-</span><span class="fl">10</span><span class="op">)</span>;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">xPlus10</span>, type<span class="op">=</span><span class="st">"b"</span>, pch<span class="op">=</span><span class="fl">20</span>, col<span class="op">=</span><span class="st">"dodgerblue"</span>,</span></span>
<span class="r-in"><span>   main<span class="op">=</span><span class="st">"Comparison of lens=+10 to lens=-10"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">xMinus10</span>, type<span class="op">=</span><span class="st">"b"</span>, pch<span class="op">=</span><span class="fl">18</span>, col<span class="op">=</span><span class="st">"orangered"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h<span class="op">=</span><span class="fl">0</span>, v<span class="op">=</span><span class="fl">0</span>, col<span class="op">=</span><span class="st">"grey"</span>, lty<span class="op">=</span><span class="st">"dashed"</span>, a<span class="op">=</span><span class="fl">0</span>, b<span class="op">=</span><span class="fl">1</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topleft"</span>,</span></span>
<span class="r-in"><span>   legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lens=+10"</span>, <span class="st">"lens=-10"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>,<span class="st">"orangered"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   pch<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">18</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   lty<span class="op">=</span><span class="st">"solid"</span>,</span></span>
<span class="r-in"><span>   bg<span class="op">=</span><span class="st">"white"</span><span class="op">)</span>;</span></span>
<span class="r-plt img"><img src="warpAroundZero-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example showing the effect of a baseline=5</span></span></span>
<span class="r-in"><span><span class="va">xPlus10b5</span> <span class="op">&lt;-</span> <span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens<span class="op">=</span><span class="fl">10</span>, baseline<span class="op">=</span><span class="fl">5</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">xMinus10b5</span> <span class="op">&lt;-</span> <span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens<span class="op">=</span><span class="op">-</span><span class="fl">10</span>, baseline<span class="op">=</span><span class="fl">5</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">xPlus10b5</span>, type<span class="op">=</span><span class="st">"b"</span>, pch<span class="op">=</span><span class="fl">20</span>, col<span class="op">=</span><span class="st">"dodgerblue"</span>,</span></span>
<span class="r-in"><span>   main<span class="op">=</span><span class="st">"Comparison of lens=+10 to lens=-10"</span>,</span></span>
<span class="r-in"><span>   ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">15</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   sub<span class="op">=</span><span class="st">"baseline=+5"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">xMinus10b5</span>, type<span class="op">=</span><span class="st">"b"</span>, pch<span class="op">=</span><span class="fl">18</span>, col<span class="op">=</span><span class="st">"orangered"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h<span class="op">=</span><span class="fl">5</span>, v<span class="op">=</span><span class="fl">5</span>, col<span class="op">=</span><span class="st">"grey"</span>, lty<span class="op">=</span><span class="st">"dashed"</span>, a<span class="op">=</span><span class="fl">0</span>, b<span class="op">=</span><span class="fl">1</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topleft"</span>,</span></span>
<span class="r-in"><span>   legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lens=+10"</span>, <span class="st">"lens=-10"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>,<span class="st">"orangered"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   pch<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">18</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   lty<span class="op">=</span><span class="st">"solid"</span>,</span></span>
<span class="r-in"><span>   bg<span class="op">=</span><span class="st">"white"</span><span class="op">)</span>;</span></span>
<span class="r-plt img"><img src="warpAroundZero-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

