<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Warp a vector of numeric values relative to zero — warpAroundZero • jamba</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Warp a vector of numeric values relative to zero — warpAroundZero"><meta name="description" content="Warp a vector of numeric values relative to zero"><meta property="og:description" content="Warp a vector of numeric values relative to zero"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">jamba</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/jamba-vignette.html">Jamba Overview</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jmw86069/jamba/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Warp a vector of numeric values relative to zero</h1>
      <small class="dont-index">Source: <a href="https://github.com/jmw86069/jamba/blob/HEAD/R/jamba.r" class="external-link"><code>R/jamba.r</code></a></small>
      <div class="d-none name"><code>warpAroundZero.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Warp a vector of numeric values relative to zero</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens <span class="op">=</span> <span class="fl">5</span>, baseline <span class="op">=</span> <span class="fl">0</span>, xCeiling <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code>numeric</code> vector</p></dd>


<dt id="arg-lens">lens<a class="anchor" aria-label="anchor" href="#arg-lens"></a></dt>
<dd><p><code>numeric</code> value which defines the lens factor,
where <code>lens &gt; 0</code> will compress values near zero, and
<code>lens &lt; 0</code> will expand values near zero and compress
values near the maximum value. If <code>lens == 0</code> the
numeric values are not changed.</p></dd>


<dt id="arg-baseline">baseline<a class="anchor" aria-label="anchor" href="#arg-baseline"></a></dt>
<dd><p><code>numeric</code> value describing the baseline, for example
when the central value is non-zero. The baseline is subtracted
from <code>x</code>, the warp is applied, then the baseline is added to
the result.</p></dd>


<dt id="arg-xceiling">xCeiling<a class="anchor" aria-label="anchor" href="#arg-xceiling"></a></dt>
<dd><p><code>numeric</code> maximum value used for the color warp range,
useful for consistency. When <code>xCeiling</code> is not supplied, the
maximum difference from <code>baseline</code> is used. When <code>xCeiling</code> is
defined, and <code>baseline</code> is non-zero, the effective value used
is <code>(xCeiling - baseline)</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments are ignored.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>numeric</code> vector after applying the warp function.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function warps numeric values using a log curve
transformation, such that values are either more compressed
near zero, or more compressed near the maximum values.
For example, a vector of integers from -10 to 10 would be warped
so the intervals near zero were smaller than 1, and intervals
farthest from zero are greater than 1.</p>
<p>The main driver for this function was the desire to compress
divergent color scales used in heatmaps, in order to enhance
smaller magnitude numeric values. Existing color ramps map the
color gradient in a linear manner relative to the numeric range,
which can cause extreme values to dominate the color scale.
Further, a linear application of colors is not always appropriate.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other jam numeric functions:
<code><a href="deg2rad.html">deg2rad</a>()</code>,
<code><a href="noiseFloor.html">noiseFloor</a>()</code>,
<code><a href="normScale.html">normScale</a>()</code>,
<code><a href="rad2deg.html">rad2deg</a>()</code>,
<code><a href="rowGroupMeans.html">rowGroupMeans</a>()</code>,
<code><a href="rowRmMadOutliers.html">rowRmMadOutliers</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">xPlus10</span> <span class="op">&lt;-</span> <span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens<span class="op">=</span><span class="fl">10</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">xMinus10</span> <span class="op">&lt;-</span> <span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens<span class="op">=</span><span class="op">-</span><span class="fl">10</span><span class="op">)</span>;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">xPlus10</span>, type<span class="op">=</span><span class="st">"b"</span>, pch<span class="op">=</span><span class="fl">20</span>, col<span class="op">=</span><span class="st">"dodgerblue"</span>,</span></span>
<span class="r-in"><span>   main<span class="op">=</span><span class="st">"Comparison of lens=+10 to lens=-10"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">xMinus10</span>, type<span class="op">=</span><span class="st">"b"</span>, pch<span class="op">=</span><span class="fl">18</span>, col<span class="op">=</span><span class="st">"orangered"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h<span class="op">=</span><span class="fl">0</span>, v<span class="op">=</span><span class="fl">0</span>, col<span class="op">=</span><span class="st">"grey"</span>, lty<span class="op">=</span><span class="st">"dashed"</span>, a<span class="op">=</span><span class="fl">0</span>, b<span class="op">=</span><span class="fl">1</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topleft"</span>,</span></span>
<span class="r-in"><span>   legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lens=+10"</span>, <span class="st">"lens=-10"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>,<span class="st">"orangered"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   pch<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">18</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   lty<span class="op">=</span><span class="st">"solid"</span>,</span></span>
<span class="r-in"><span>   bg<span class="op">=</span><span class="st">"white"</span><span class="op">)</span>;</span></span>
<span class="r-plt img"><img src="warpAroundZero-1.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example showing the effect of a baseline=5</span></span></span>
<span class="r-in"><span><span class="va">xPlus10b5</span> <span class="op">&lt;-</span> <span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens<span class="op">=</span><span class="fl">10</span>, baseline<span class="op">=</span><span class="fl">5</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">xMinus10b5</span> <span class="op">&lt;-</span> <span class="fu">warpAroundZero</span><span class="op">(</span><span class="va">x</span>, lens<span class="op">=</span><span class="op">-</span><span class="fl">10</span>, baseline<span class="op">=</span><span class="fl">5</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">xPlus10b5</span>, type<span class="op">=</span><span class="st">"b"</span>, pch<span class="op">=</span><span class="fl">20</span>, col<span class="op">=</span><span class="st">"dodgerblue"</span>,</span></span>
<span class="r-in"><span>   main<span class="op">=</span><span class="st">"Comparison of lens=+10 to lens=-10"</span>,</span></span>
<span class="r-in"><span>   ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">15</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   sub<span class="op">=</span><span class="st">"baseline=+5"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">xMinus10b5</span>, type<span class="op">=</span><span class="st">"b"</span>, pch<span class="op">=</span><span class="fl">18</span>, col<span class="op">=</span><span class="st">"orangered"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h<span class="op">=</span><span class="fl">5</span>, v<span class="op">=</span><span class="fl">5</span>, col<span class="op">=</span><span class="st">"grey"</span>, lty<span class="op">=</span><span class="st">"dashed"</span>, a<span class="op">=</span><span class="fl">0</span>, b<span class="op">=</span><span class="fl">1</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topleft"</span>,</span></span>
<span class="r-in"><span>   legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lens=+10"</span>, <span class="st">"lens=-10"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>,<span class="st">"orangered"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   pch<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">18</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   lty<span class="op">=</span><span class="st">"solid"</span>,</span></span>
<span class="r-in"><span>   bg<span class="op">=</span><span class="st">"white"</span><span class="op">)</span>;</span></span>
<span class="r-plt img"><img src="warpAroundZero-2.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

